# Chrome 插件演示项目

## 项目简介
这是一个Chrome浏览器插件演示项目，主要功能是提供页面锁定/解锁功能和页面备注功能。当页面被锁定时，用户可以浏览和查看页面内容，但无法进行任何交互操作，包括点击、输入、复制等。同时，用户可以为每个页面添加自定义备注，并支持拖动、四角调整大小等功能。

## 功能需求
1. 开发一个Chrome浏览器插件
2. 提供一个开关按钮，可以锁定/解锁界面，实现以下功能：
   - 锁定时，页面上的信息可以刷新查看
   - 禁止所有鼠标点击操作
   - 禁止所有键盘输入
   - 禁止文本选择和复制粘贴
   - 禁止表单操作
   - 禁止拖拽操作
3. 提供页面备注功能：
   - 可以为每个页面添加自定义备注
   - 支持选择备注显示位置（左上、右上、左下、右下）
   - 支持通过四个角调整备注大小
   - 支持自由拖动备注到任意位置
   - 备注内容持久化存储
   - 备注显示时不影响页面操作
   - 调整后的位置和大小会自动保存
4. 提供用户友好的界面和清晰的视觉反馈

## 项目结构
```
chrome_plugin_demo/
├── manifest.json        # 插件配置文件
├── popup.html          # 插件弹出窗口
├── popup.js           # 弹出窗口的控制逻辑
├── content.js         # 注入到页面的脚本
├── styles.css         # 样式文件
└── images/            # 图标文件夹
    ├── icon.svg       # SVG源文件
    ├── icon16.png     # 16x16图标
    ├── icon48.png     # 48x48图标
    └── icon128.png    # 128x128图标
```

## 技术实现
1. **manifest.json**: 
   - 使用 manifest v3 规范
   - 配置插件权限和基本信息
   - 设置content scripts和popup页面
   - 添加storage权限用于存储备注

2. **popup.html & styles.css**:
   - 实现简洁的用户界面
   - 包含开关按钮和状态显示
   - 使用CSS实现美观的开关效果
   - 为锁定状态提供明确的视觉反馈
   - 添加备注输入区域和位置选择
   - 实现备注编辑界面的样式
   - 添加四角调整手柄的样式
   - 提供调整时的视觉反馈

3. **popup.js**:
   - 处理用户交互
   - 管理页面锁定状态
   - 与content script通信
   - 处理备注的保存和更新
   - 管理备注的本地存储

4. **content.js**:
   - 注入到目标页面
   - 实现全面的页面锁定功能：
     * 禁用所有表单元素（input、textarea、select、button）
     * 禁用所有链接点击
     * 阻止键盘事件（防止快捷键操作）
     * 阻止鼠标事件（点击、双击、右键等）
     * 阻止复制粘贴操作
     * 阻止拖拽操作
   - 使用事件捕获确保最高优先级
   - 实现页面备注的显示和更新
   - 管理备注元素的位置和样式
   - 实现备注的拖动功能
   - 实现四角调整大小功能：
     * 支持从任意角落调整大小
     * 保持内容相对位置不变
     * 提供最小和最大尺寸限制
     * 自动保存调整后的状态

5. **锁定样式（styles.css）**:
   - 全局禁用鼠标事件
   - 禁止文本选择
   - 为所有子元素应用锁定样式
   - 提供多浏览器兼容性支持
   - 改变锁定状态下元素的视觉样式：
     * 表单元素显示为禁用状态
     * 链接变为灰色且无法点击
     * 鼠标指针显示为禁止图标
   - 定义备注显示的样式和位置
   - 实现四角调整手柄的样式：
     * 圆形可视手柄
     * 悬停效果
     * 不同角落的光标样式
     * 调整时的视觉反馈

6. **图标文件**:
   - 使用SVG格式设计基础图标
   - 提供三种尺寸的PNG图标（16x16, 48x48, 128x128）
   - 采用Material Design风格的蓝色（#2196f3）
   - 简洁的锁形状设计，符合插件功能

## 技术栈
- HTML
- CSS
- JavaScript
- Chrome Extension API
- Chrome Storage API
- SVG（图标设计）

## 开发环境
- Chrome浏览器
- 开发工具（VSCode等）

## 如何使用
1. 克隆项目到本地
2. 在Chrome浏览器中打开 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 点击工具栏中的插件图标：
   - 使用开关按钮控制页面锁定状态
   - 在文本框中输入页面备注
   - 选择备注显示位置
   - 点击保存按钮应用备注
   - 通过四个角调整备注大小
   - 拖动备注到任意位置

## 开发进度
- [x] 项目初始化
- [x] 基础框架搭建
- [x] 功能开发
- [x] 图标设计与实现
- [x] 增强页面锁定功能
- [x] 添加页面备注功能
- [x] 添加四角调整功能
- [ ] 测试与优化 

## 注意事项
1. 插件需要在Chrome浏览器中使用
2. 需要开启开发者模式才能加载本地插件
3. 页面锁定时仍然可以查看和刷新页面内容
4. 锁定功能会完全禁止页面上的所有交互操作，包括：
   - 鼠标点击
   - 键盘输入
   - 文本选择
   - 复制粘贴
   - 表单操作
   - 拖拽操作
5. 页面备注功能：
   - 备注内容会保存在浏览器本地存储中
   - 备注显示不会影响页面的正常操作
   - 页面刷新后备注依然保持
   - 不同页面可以设置不同的备注
   - 可以通过四个角调整备注大小
   - 可以自由拖动到任意位置
   - 位置和大小会自动保存

## 更新日志
### 2024-03-19
- 添加SVG格式的图标源文件
- 生成三种尺寸的PNG图标
- 更新项目文档，添加图标相关说明
- 增强页面锁定功能：
  * 添加全面的事件拦截
  * 增强视觉反馈效果
  * 提升锁定的安全性
- 添加页面备注功能：
  * 实现备注的添加和编辑
  * 支持自定义备注位置
  * 添加本地存储支持
  * 优化备注显示效果
- 添加四角调整功能：
  * 实现四个角的大小调整
  * 添加调整手柄和视觉反馈
  * 保持内容位置不变
  * 添加大小限制
  * 自动保存调整后的状态